Male = {}

local state = 0
local done = 0
local m_animations = {'animMaleIdle.anim', 'animMaleWalk.anim',
					  'animMaleRun.anim', 'animMalePunchA.anim',
					  'animMaleKick.anim', 'animMaleDamage.anim',
					  'animMaleDie.anim'}

--local states = {
-- {}
--}

--change state if possible
function Male.doState(a, s)
 if s == 'die' and a['state'] ~= 'die' then
  a['state'] = 'die'
  SetState(a['id'], 0x01, m_animations[7], '', 1000)
 elseif s == 'damage' and a['state'] ~= 'damage' then
  a['state'] = 'damage'
  SetState(a['id'], 0x01, m_animations[6], '', 1000)
 end
end

function Male.doAI(a)
 local fall = Fall(a['id'])
 local done	= DoneState(a['id'])
 local life = Life(a['id'])

 if a['state'] == 'die' then
  return
 end

 if life < 0.0 and a['state'] ~= 'die' then
   Male.doState(a, 'die')
 end
 if a['state'] == 'stay' then 
  Stay(a['id'])
  local have = FindEnemy(a['id'])
  if have  then
   local dist = DistanceEnemy(a['id'])
   if ( dist > 10) then
	a['state'] = 'pursuit'
	SetState(a['id'], 2, m_animations[3], "", 300, true)
   end
  end
 end
 if a['state'] == 'walk' then 
 end
 if a['state'] == 'run' then 
 end
 if a['state'] == 'damage' then 
  if done == true then
   a['state'] = 'stay'
   SetState(a['id'], 2, m_animations[1], "", 300, true)
  end
 end
 if a['state'] == 'pursuit' then 
  MoveToEnemy(a['id'])
  local dist = DistanceEnemy(a['id'])
  if( dist < 10) then
   a['state'] = 'stay'
   SetState(a['id'], 2, m_animations[1], "", 300, true)
  end
 end
end

